<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess 2024 by Ashu</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <!-- Chessboard.js -->
    <script src="/lib/chess.js"></script>

    <!-- Mobile and Desktop Chessboard Styles -->
    <link rel="stylesheet" href="css/chessboard.css" id="chessboard-css">
    <link rel="stylesheet" href="css/board.css">

    <script>
        // Function to check if the device is mobile
        function is_touch_device() {
            return 'ontouchstart' in window || navigator.maxTouchPoints;
        };

        // Load appropriate CSS for mobile or desktop
        function loadCss(cssId, cssHref) {
            $('#' + cssId).attr('href', cssHref);
        }

        var mobileLibs = 8;
        var desktopLibs = 8;
        var isMobile = is_touch_device();

        // Check if mobile or desktop and load necessary scripts
        if (isMobile == true) {
            var chess, board;
            loadCss('chessboard-css', 'css/caustique-chessboard.css');
            $.getScript('js/mobile/chessboard-caustique-min.js', initGameBoard('mobile'));
            $.getScript('js/board-controls-side.js', initGameBoard('mobile'));
            $.getScript('js/board-controls-bottom.js', initGameBoard('mobile'));
            $.getScript('js/board-sets.js', initGameBoard('mobile'));
            $.getScript('js/board-time.js', initGameBoard('mobile'));
            $.getScript('js/board-actions.js', initGameBoard('mobile'));
            $.getScript('js/mobile/board-actions-mobile.js', initGameBoard('mobile'));
            $.getScript('js/board-init.js', initGameBoard('mobile'));
        } else {
            loadCss('chessboard-css', 'css/chessboard.css');
            $.getScript('js/libs/chessboard.min.js', initGameBoard('desktop'));
            $.getScript('js/board-controls-side.js', initGameBoard('desktop'));
            $.getScript('js/board-controls-bottom.js', initGameBoard('desktop'));
            $.getScript('js/board-sets.js', initGameBoard('desktop'));
            $.getScript('js/board-time.js', initGameBoard('desktop'));
            $.getScript('js/board-actions.js', initGameBoard('desktop'));
            $.getScript('js/board-actions-desktop.js', initGameBoard('desktop'));
            $.getScript('js/board-init.js', initGameBoard('desktop'));
        }

        function initGameBoard(lib = false) {
            if (lib == 'mobile') {
                mobileLibs--;
                if (mobileLibs == 0) {
                    console.log('Mobile loaded');
                    setTimeout(function() {
                        setMobileBoard();
                    }, 1000);
                }
            }
            if (lib == 'desktop') {
                desktopLibs--;
                if (desktopLibs == 0) {
                    console.log('Desktop loaded');
                    setTimeout(function() {
                        setDesktopBoard();
                    }, 1000);
                }
            }
        }
    </script>
</head>
<body>
    <!-- Your existing content -->

    <div class="content">
        <span align="center">
            <a href="https://prismatic-lamington-297b85.netlify.app/" style="color:#ffffff">
                <img width="80" height="80" src="img/icons/favicon.svg" style="display: block; margin-left: auto; margin-right: auto">
                <h1 align="center" style="font-weight:600">Chess-Arena</h1>
            </a>
            <h2 align="center" style="color:#ffffff">Play Chess Against Opponents</h2>
            <br />
        </span>
        <div class="chess-area">
            <div class="board-table">
                <div id="board-top-controls" class="top-controls">
                    <!-- Board control popups here -->
                </div>
                <div id="board" class="board"></div>
                <div id="board-controls" class="controls">
                    <!-- Board controls for desktop and mobile -->
                </div>
            </div>
            <div class="board-settings">
                <!-- Settings and history -->
            </div>
        </div>
        <div class="chess-log"></div>
    </div>

    <script>
        // Any additional scripts or setup specific to mobile
        function setMobileBoard() {
            // Mobile board setup if necessary
        }
    </script>
</body>
</html>